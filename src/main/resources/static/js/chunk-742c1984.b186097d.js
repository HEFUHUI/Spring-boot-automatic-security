(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-742c1984"],{2871:function(e,t,a){"use strict";var n=a("43b5"),r=a("4382"),i=a("8a56"),s=a("8767"),o=a("5911");n("search",1,(function(e,t,a){return[function(t){var a=i(this),n=void 0==t?void 0:t[e];return void 0!==n?n.call(t,a):new RegExp(t)[e](String(a))},function(e){var n=a(t,e,this);if(n.done)return n.value;var i=r(e),c=String(this),l=i.lastIndex;s(l,0)||(i.lastIndex=0);var u=o(i,c);return s(i.lastIndex,l)||(i.lastIndex=l),null===u?-1:u.index}]}))},"389c":function(e,t,a){var n=a("baaa"),r=a("eb5b").f,i=Function.prototype,s=i.toString,o=/^\s*function ([^ (]*)/,c="name";n&&!(c in i)&&r(i,c,{configurable:!0,get:function(){try{return s.call(this).match(o)[1]}catch(e){return""}}})},8767:function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},a237:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",[a("el-card",{staticClass:"box-card",staticStyle:{"margin-bottom":"10px"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("el-button",{attrs:{icon:"el-icon-back",size:"mini"},on:{click:function(t){return e.$router.go(-1)}}},[e._v("返回")]),a("h1",[e._v("所有设备")])],1),a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.search,size:"mini"}},[a("el-form-item",{attrs:{label:"姓名"}},[a("el-input",{attrs:{placeholder:"请输入关键字"},model:{value:e.search.nickName,callback:function(t){e.$set(e.search,"nickName",t)},expression:"search.nickName"}})],1),a("el-form-item",{attrs:{label:"ID"}},[a("el-input",{attrs:{placeholder:"请输入关键字"},model:{value:e.search.user_id,callback:function(t){e.$set(e.search,"user_id",t)},expression:"search.user_id"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSearch}},[e._v("查询")]),a("el-button",{attrs:{icon:"el-icon-refresh-left",size:"mini"},on:{click:e.fetch}},[e._v("刷新")])],1)],1),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.showDialog=!0}}},[e._v("添加")])],1)],1),a("el-row",[a("el-col",[a("el-card",{staticClass:"box-card"},[a("el-row",e._l(e.data.items,(function(e){return a("el-col",{key:e.userId,attrs:{span:4}},[a("h-equ",{attrs:{equ:e}})],1)})),1)],1),a("el-card",[a("el-pagination",{staticStyle:{float:"right","margin-bottom":"10px"},attrs:{background:"","page-size":e.data.limit,"page-sizes":[5,10,20,30,40,50,100],layout:"sizes, prev, pager, next, jumper, ->, total, slot",total:e.data.total},on:{"current-change":function(t){return e.fetch(t,e.pagination.page_size)},"size-change":function(t){return e.fetch(e.pagination.current_page,t)}}})],1)],1),a("h-selector",{attrs:{action:"image",no_result:"",visible:e.changeAvatar},on:{enter:e.changeAvatarHandle,"update:visible":function(t){e.changeAvatar=t}},scopedSlots:e._u([{key:"default",fn:function(t){return a("div",{},[a("el-image",{staticStyle:{width:"100px",height:"50px"},attrs:{src:e.$axios.defaults.baseURL+"/image/get/"+(t.data&&t.data.imageId),fit:"cover"}})],1)}}])}),a("h-selector",{attrs:{action:"role",multiple:!0,no_result:"",visible:e.grantequRole},on:{enter:e.grantequRoleHandle,"update:visible":function(t){e.grantequRole=t}},scopedSlots:e._u([{key:"default",fn:function(t){return a("div",{},[a("span",{staticStyle:{"font-size":"20px"}},[e._v(e._s(t.data.name))])])}}]),model:{value:e.c_equ.roles,callback:function(t){e.$set(e.c_equ,"roles",t)},expression:"c_equ.roles"}}),a("el-dialog",{attrs:{title:"添加设备",visible:e.showDialog,width:"60%"},on:{open:e.openDialog,"update:visible":function(t){e.showDialog=t}}},[a("el-form",{ref:"form",attrs:{model:e.equ,"label-width":"80px",size:"medium"}},[a("el-form-item",{attrs:{label:"设备昵称",required:""}},[a("el-input",{model:{value:e.equ.nickName,callback:function(t){e.$set(e.equ,"nickName",t)},expression:"equ.nickName"}})],1),a("el-form-item",{attrs:{label:"设备类型",required:""}},[a("el-select",{attrs:{placeholder:"请选择设备类型"},model:{value:e.equ.equType,callback:function(t){e.$set(e.equ,"equType",t)},expression:"equ.equType"}},[a("el-option",{attrs:{label:"管理员",value:"0"}}),a("el-option",{attrs:{label:"普通设备|学生",value:"1"}}),a("el-option",{attrs:{label:"设备",value:"2"}})],1)],1),a("el-form-item",{attrs:{label:"设备名",required:""}},[a("el-input",{attrs:{type:"text"},model:{value:e.equ.loginName,callback:function(t){e.$set(e.equ,"loginName",t)},expression:"equ.loginName"}})],1),a("el-form-item",{attrs:{label:"密码",required:""}},[a("el-input",{attrs:{type:"password"},model:{value:e.equ.password,callback:function(t){e.$set(e.equ,"password",t)},expression:"equ.password"}})],1),a("el-form-item",{attrs:{label:"照片"}},[a("h-selector",{attrs:{action:"image",visible:e.showSelector},on:{"update:visible":function(t){e.showSelector=t}},scopedSlots:e._u([{key:"default",fn:function(t){return a("div",{},[a("div",[a("el-image",{staticStyle:{width:"100px",height:"50px"},attrs:{src:e.$axios.defaults.baseURL+"/image/get/"+(t.data&&t.data.imageId),fit:"cover"}})],1)])}}]),model:{value:e.equ.avatar,callback:function(t){e.$set(e.equ,"avatar",t)},expression:"equ.avatar"}},[a("div",{attrs:{slot:"result"},slot:"result"},[a("el-image",{staticStyle:{width:"100px",height:"50px"},attrs:{"preview-src-list":[e.$axios.defaults.baseURL+"/image/get/"+(e.equ.avatar&&e.equ.avatar.imageId)],src:e.$axios.defaults.baseURL+"/image/get/"+(e.equ.avatar&&e.equ.avatar.imageId),fit:"cover"}})],1),a("el-button",{attrs:{slot:"active",size:"mini"},on:{click:function(t){e.showSelector=!0}},slot:"active"},[e._v("选择")])],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.showDialog=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1)],1)],1)],1)},r=[],i=a("99a5"),s=(a("6a61"),a("f18c"),a("9896"),a("2871"),a("389c"),a("f8cc")),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{attrs:{"body-style":{padding:"0px"}}},[a("el-image",{staticClass:"image",staticStyle:{width:"100%",height:"200px"},attrs:{"preview-src-list":[e.$axios.defaults.baseURL+"/image/get/"+e.equ.avatar.imageId],fit:"cover",src:e.$axios.defaults.baseURL+"/image/get/"+e.equ.avatar.imageId}}),a("div",{staticStyle:{padding:"14px"}},[a("span",{staticStyle:{"font-weight":"bold","font-size":"20px"}},[e._v(e._s(e.equ.nickName))]),a("p",[a("time",{staticClass:"time"},[e._v("添加时间："+e._s(new Date(e.equ.createTime).format("yyyy-MM-dd")))])]),e.equ.online?a("el-button",{attrs:{type:"success",size:"mini"}},[e._v("在线")]):a("el-button",{attrs:{type:"warning",size:"mini",disabled:!0}},[e._v("离线")])],1),a("div",{staticStyle:{padding:"10px"}},[a("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(t){return e.$router.push("/monitor/"+e.source.sessionId)}}},[e._v("监控页面")]),a("el-button",{staticClass:"button",attrs:{type:"danger",size:"mini"}},[e._v("下线设备")])],1)],1)},c=[],l={props:["equ"],data:function(){return{source:{},isOnline:!1}},mounted:function(){}},u=l,p=a("4ac2"),d=Object(p["a"])(u,o,c,!1,null,null,null),g=d.exports,m={data:function(){return{data:{},showDialog:!1,equ:{},pagination:{current_page:1,page_size:10},grantequRole:!1,changeAvatar:!1,showSelector:!1,equs:[],search:{},c_equ:{}}},components:{hSelector:s["a"],hEqu:g},methods:{fetch:function(){var e=arguments,t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.length>0&&void 0!==e[0]?e[0]:1,r=e.length>1&&void 0!==e[1]?e[1]:10,t.pagination.page_size=r,t.pagination.current_page=n,a.next=6,t.$axios.get("user?page=".concat(n,"&limit=").concat(r,"&q=user_type,2"));case 6:i=a.sent,t.data=i.data.data;case 8:case"end":return a.stop()}}),a)})))()},onSearch:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.get("user?page=".concat(e.pagination.current_page,"&limit=").concat(e.pagination.page_size,"&q=nick_name,").concat(e.search.nickName||" ",",user_type,2"));case 2:a=t.sent,e.data=a.data.data;case 4:case"end":return t.stop()}}),t)})))()},submit:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.post("equ",e.equ);case 2:e.showDialog=!1,e.fetch();case 4:case"end":return t.stop()}}),t)})))()},grantequRoleHandle:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$axios.put("user/grant/".concat(t.c_equ.equId),e);case 2:t.fetch();case 3:case"end":return a.stop()}}),a)})))()},removeRoleHandle:function(e,t){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,a.$confirm("确定从 ".concat(t.nickName," 上移除 ").concat(e.name," 身份？"));case 2:return n.next=4,a.$axios.put("user/revoke/".concat(t.equId,"/").concat(e.roleId));case 4:a.fetch();case 5:case"end":return n.stop()}}),n)})))()},changeAvatarHandle:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$axios.put("user/".concat(t.c_equ.equId),{avatar:e});case 2:t.fetch();case 3:case"end":return a.stop()}}),a)})))()},del:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$confirm("确定删除？？");case 2:return a.next=4,t.$axios.delete("equ/".concat(e));case 4:t.fetch();case 5:case"end":return a.stop()}}),a)})))()},openDialog:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.get("role");case 2:a=t.sent,e.roles=a.data.data.items;case 4:case"end":return t.stop()}}),t)})))()}},created:function(){this.fetch()}},f=m,h=Object(p["a"])(f,n,r,!1,null,null,null);t["default"]=h.exports},f8cc:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"selector"},[a("el-dialog",{attrs:{visible:e.visible,"destroy-on-close":!0,width:"60%","close-on-click-modal":!1,"append-to-body":!0},on:{"update:visible":function(t){e.visible=t}}},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:6}},[a("el-button",{attrs:{type:"primary"},on:{click:e.fetch}},[e._v("刷新")])],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[e.multiple?a("el-checkbox-group",{model:{value:e.selectds,callback:function(t){e.selectds=t},expression:"selectds"}},e._l(e.source,(function(t){return a("el-button",{key:t.id,staticStyle:{margin:"2px"}},[a("el-checkbox-button",{attrs:{label:t}},[e._t("default",null,{data:t})],2)],1)})),1):a("el-radio-group",{model:{value:e.selectds,callback:function(t){e.selectds=t},expression:"selectds"}},e._l(e.source,(function(t){return a("el-button",{key:t.id,staticStyle:{margin:"5px"}},[a("el-radio-button",{attrs:{label:t}},[e._t("default",null,{data:t})],2)],1)})),1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-pagination",{staticStyle:{padding:"5px","text-align":"right"},attrs:{"current-page":e.pagination.currentPage,background:!0,"page-sizes":[5,12,15,20,25,35,100,200],"page-size":e.pagination.page_size,layout:"sizes, prev, pager, next, jumper, ->, total, slot",total:e.pagination.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1)],1),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.exit}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.enter}},[e._v("确 定")])],1)],1),e.not_result?e._e():[e.checked?e._t("result"):e._e()],a("div",[e._t("active")],2)],2)},r=[],i=a("99a5"),s=(a("6a61"),a("f18c"),{name:"Selector",model:{prop:"checked"},props:["visible","checked","multiple","not_result","action","title"],data:function(){return{pagination:{currentPage:1,total:7,page_size:12},selectds:[],source:[]}},methods:{exit:function(){this.$emit("update:visible",!1)},fetch:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.get("".concat(e.action).concat(/\?=*/.test(e.action)?"&":"?","limit=").concat(e.pagination.page_size,"&page=").concat(e.pagination.currentPage));case 2:a=t.sent.data,e.source=a.data.items,e.pagination.total=a.data.total;case 5:case"end":return t.stop()}}),t)})))()},handleCurrentChange:function(e){this.pagination.currentPage=e,this.fetch(e)},handleSizeChange:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.pagination.page_size=e,t.fetch(t.pagination.currentPage);case 2:case"end":return a.stop()}}),a)})))()},enter:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$emit("input",e.selectds),e.$emit("update:visible",!1),e.$emit("enter",e.selectds);case 3:case"end":return t.stop()}}),t)})))()}},created:function(){this.fetch(1)}}),o=s,c=a("4ac2"),l=Object(c["a"])(o,n,r,!1,null,null,null);t["a"]=l.exports}}]);
//# sourceMappingURL=chunk-742c1984.b186097d.js.map